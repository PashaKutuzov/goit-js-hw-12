{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"48505401-41d9a45057075903c793c7a55\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    if (response.data.hits.length === 0) {\n      throw new Error(\"No images found\");\n    }\n    return { hits: response.data.hits, totalHits: response.data.totalHits };\n  } catch (error) {\n    throw new Error(\"Failed to fetch images: \" + error.message);\n  }\n}\n\nexport default class ButtonService {\n  constructor(buttonEl, hiddenClass) {\n    this.buttonEl = buttonEl;\n    this.hiddenClass = hiddenClass;\n  }\n\n  hide() {\n    this.buttonEl.classList.add(this.hiddenClass);\n  }\n\n  show() {\n    this.buttonEl.classList.remove(this.hiddenClass);\n  }\n\n  disable() {\n    this.buttonEl.disabled = true;\n  }\n\n  enable() {\n    this.buttonEl.disabled = false;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function renderGallery(images, galleryContainer = document.querySelector('.card-list')) {\n  // Append new images to the gallery instead of replacing all content\n  const markup = images\n    .map(\n      (image) => `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        <div class=\"info\">\n          <p><strong>Likes:</strong> ${image.likes}</p>\n          <p><strong>Views:</strong> ${image.views}</p>\n          <p><strong>Comments:</strong> ${image.comments}</p>\n          <p><strong>Downloads:</strong> ${image.downloads}</p>\n        </div>\n      </a>\n    `\n    )\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n\n  // Initialize or refresh the lightbox\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery-item', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n}\n\nexport function clearGallery(galleryContainer = document.querySelector('.card-list')) {\n  galleryContainer.innerHTML = '';\n}\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderGallery, clearGallery } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport ButtonService from \"./js/pixabay-api.js\";\n\nconst form = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".card-list\");\nconst buttonMore = document.querySelector(\".load-more\");\n\n\nbuttonMore.style.display = \"none\";\n\n\nconst loader = document.createElement(\"p\");\nloader.textContent = \"Loading...\";\nloader.style.display = \"none\";\nloader.style.fontSize = \"16px\";\nloader.style.fontWeight = \"bold\";\nloader.style.textAlign = \"center\";\nloader.style.marginTop = \"10px\";\n\n\nconst loadMoreBtn = new ButtonService(buttonMore, \"is-hidden\");\n\nconst params = {\n  page: 1,\n  perPage: 15,\n  q: \"\",\n  maxPage: 0,\n};\n\nbuttonMore.insertAdjacentElement(\"afterend\", loader);\n\nform.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n\n  const query = event.target.elements.query.value.trim();\n  if (!query) {\n    iziToast.warning({\n      title: \"Warning\",\n      message: \"Please enter a search query!\",\n    });\n    return;\n  }\n\n  params.q = query;\n  params.page = 1;\n  clearGallery();\n  loader.style.display = \"block\";\n  buttonMore.style.display = \"none\";\n\n  fetchImages(query, params.page, params.perPage)\n    .then(({ hits, totalHits }) => {\n      if (hits.length === 0) {\n        iziToast.error({\n          title: \"Error\",\n          message: \"Sorry, no images found! Please try again.\",\n        });\n        return;\n      }\n      renderGallery(hits);\n      params.maxPage = Math.ceil(totalHits / params.perPage);\n\n      if (params.page < params.maxPage) {\n        buttonMore.style.display = \"block\";\n      }\n    })\n    .catch(() => {\n      iziToast.error({\n        title: \"Error\",\n        message: \"An error occurred while fetching images. Please try again!\",\n      });\n    })\n    .finally(() => {\n      loader.style.display = \"none\";\n    });\n});\n\nbuttonMore.addEventListener(\"click\", () => {\n  params.page += 1;\n  loader.style.display = \"block\";\n  buttonMore.style.display = \"none\"; \n\n  fetchImages(params.q, params.page, params.perPage)\n    .then(({ hits }) => {\n      if (hits.length === 0 || params.page >= params.maxPage) {\n        iziToast.error({\n          title: \"Error\",\n          message: \"No more images available.\",\n        });\n        buttonMore.style.display = \"none\";\n        return;\n      }\n\n      renderGallery(hits);\n      smoothScroll();\n\n      if (params.page < params.maxPage) {\n        buttonMore.style.display = \"block\";\n      } else {\n        buttonMore.style.display = \"none\";\n      }\n    })\n    .catch(() => {\n      iziToast.error({\n        title: \"Error\",\n        message: \"An error occurred while fetching images. Please try again!\",\n      });\n    })\n    .finally(() => {\n      loader.style.display = \"none\";\n    });\n});\n\n\nfunction smoothScroll() {\n  const firstCard = document.querySelector(\".gallery-item\");\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2, \n      behavior: \"smooth\",\n    });\n  }\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","response","axios","error","lightbox","renderGallery","images","galleryContainer","markup","image","SimpleLightbox","clearGallery","form","buttonMore","loader","params","event","iziToast","hits","totalHits","smoothScroll","firstCard","cardHeight"],"mappings":"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"}